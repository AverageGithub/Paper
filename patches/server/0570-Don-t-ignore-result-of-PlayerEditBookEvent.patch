From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Jason Penilla <11360596+jpenilla@users.noreply.github.com>
Date: Mon, 5 Apr 2021 18:35:15 -0700
Subject: [PATCH] Don't ignore result of PlayerEditBookEvent


diff --git a/src/main/java/net/minecraft/server/network/ServerGamePacketListenerImpl.java b/src/main/java/net/minecraft/server/network/ServerGamePacketListenerImpl.java
<<<<<<< HEAD:patches/server/0569-Don-t-ignore-result-of-PlayerEditBookEvent.patch
index a4f10823242f412ccfece093ed0986512131c4ba..b84cc507ee467e61e90a31da1ca8568f0d947f6b 100644
=======
index 5505b15ce0b7891b4d9329a8f4f7b7c12057c9e8..7c3cbd489c9d7aaa678db47ebe8f27a3fc2aabc7 100644
>>>>>>> 883cd87f8 (Readd 0414-Use-distance-map-to-optimise-entity-tracker):patches/server/0570-Don-t-ignore-result-of-PlayerEditBookEvent.patch
--- a/src/main/java/net/minecraft/server/network/ServerGamePacketListenerImpl.java
+++ b/src/main/java/net/minecraft/server/network/ServerGamePacketListenerImpl.java
@@ -1186,7 +1186,7 @@ public class ServerGamePacketListenerImpl extends ServerCommonPacketListenerImpl
         }
 
         itemstack.addTagElement("pages", nbttaglist);
-        CraftEventFactory.handleEditBookEvent(this.player, slot, handItem, itemstack); // CraftBukkit
+        this.player.getInventory().setItem(slot, CraftEventFactory.handleEditBookEvent(this.player, slot, handItem, itemstack)); // CraftBukkit // Paper - Don't ignore result (see other callsite for handleEditBookEvent)
     }
 
     @Override
